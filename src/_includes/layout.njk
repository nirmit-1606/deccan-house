<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title or "Deccan House" }}</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/about.css">
  <link rel="stylesheet" href="/css/menu.css">
  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/footer.css">
</head>
<body>
  {% include "partials/header.njk" %}
  <main>
    {{ content | safe }}
  </main>
  {% include "partials/footer.njk" %}

  {% if page.fileSlug == "menu" %}
    <script src="/js/menu.js"></script>
  {% endif %}

  <script>
  // animate header size on scroll using a CSS custom property --shrink (0..1)
  (function () {
    const header = document.querySelector('header');
    if (!header) return;

    let ticking = false;
    const maxScroll = 180; // px of scroll after which header is fully shrunk

    function onScroll() {
      const sc = Math.max(0, window.scrollY || 0);
      const shrink = Math.min(1, sc / maxScroll);
      header.style.setProperty('--shrink', String(shrink));

      // add a pinned class when scrolled a bit for optional shadow/visual
      if (sc > 8) header.classList.add('header--pinned');
      else header.classList.remove('header--pinned');

      ticking = false;
    }

    window.addEventListener('scroll', function () {
      if (!ticking) {
        window.requestAnimationFrame(onScroll);
        ticking = true;
      }
    }, { passive: true });

    // initialize on load
    onScroll();
  })();
  </script>
</body>
</html>
